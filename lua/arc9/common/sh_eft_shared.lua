ARC9EFT = ARC9EFT or {}
ARC9EFTBASE = true

ARC9EFT.RicochetSounds = {
    "arc9_eft_shared/ricochet/ricochet1.ogg",
    "arc9_eft_shared/ricochet/ricochet2.ogg",
    "arc9_eft_shared/ricochet/ricochet3.ogg",
    "arc9_eft_shared/ricochet/ricochet4.ogg",
    "arc9_eft_shared/ricochet/ricochet5.ogg",
    "arc9_eft_shared/ricochet/ricochet6.ogg",
    "arc9_eft_shared/ricochet/ricochet7.ogg",
    "arc9_eft_shared/ricochet/ricochet9.ogg",
    "arc9_eft_shared/ricochet/ricochet10.ogg",
    "arc9_eft_shared/ricochet/ricochet11.ogg",
    "arc9_eft_shared/ricochet/ricochet12.ogg",
    "arc9_eft_shared/ricochet/ricochet13.ogg",
}

ARC9EFT.Shells556 = {
    "arc9_eft_shared/shells/556mm_shell_concrete1.ogg", "arc9_eft_shared/shells/556mm_shell_concrete2.ogg", "arc9_eft_shared/shells/556mm_shell_concrete3.ogg",
    "arc9_eft_shared/shells/556mm_shell_concrete1.ogg", "arc9_eft_shared/shells/556mm_shell_concrete2.ogg", "arc9_eft_shared/shells/556mm_shell_concrete3.ogg",
    "arc9_eft_shared/shells/556mm_shell_concrete1.ogg", "arc9_eft_shared/shells/556mm_shell_concrete2.ogg", "arc9_eft_shared/shells/556mm_shell_concrete3.ogg",
}
ARC9EFT.Shells9mm = {
    "arc9_eft_shared/shells/9mm_shell_concrete1.ogg", "arc9_eft_shared/shells/9mm_shell_concrete2.ogg", "arc9_eft_shared/shells/9mm_shell_concrete3.ogg",
    "arc9_eft_shared/shells/9mm_shell_concrete1.ogg", "arc9_eft_shared/shells/9mm_shell_concrete2.ogg", "arc9_eft_shared/shells/9mm_shell_concrete3.ogg",
    "arc9_eft_shared/shells/9mm_shell_concrete1.ogg", "arc9_eft_shared/shells/9mm_shell_concrete2.ogg", "arc9_eft_shared/shells/9mm_shell_concrete3.ogg",
}
ARC9EFT.Shells12cal = {
    "arc9_eft_shared/shells/12cal_shell_concrete1.ogg", "arc9_eft_shared/shells/12cal_shell_concrete2.ogg", "arc9_eft_shared/shells/12cal_shell_concrete3.ogg",
    "arc9_eft_shared/shells/12cal_shell_concrete1.ogg", "arc9_eft_shared/shells/12cal_shell_concrete2.ogg", "arc9_eft_shared/shells/12cal_shell_concrete3.ogg",
    "arc9_eft_shared/shells/12cal_shell_concrete1.ogg", "arc9_eft_shared/shells/12cal_shell_concrete2.ogg", "arc9_eft_shared/shells/12cal_shell_concrete3.ogg",
}
ARC9EFT.ShellsHeavy = {
    "arc9_eft_shared/shells/heavy_shell_concrete1.ogg", "arc9_eft_shared/shells/heavy_shell_concrete2.ogg", "arc9_eft_shared/shells/heavy_shell_concrete3.ogg",
    "arc9_eft_shared/shells/heavy_shell_concrete1.ogg", "arc9_eft_shared/shells/heavy_shell_concrete2.ogg", "arc9_eft_shared/shells/heavy_shell_concrete3.ogg",
    "arc9_eft_shared/shells/heavy_shell_concrete1.ogg", "arc9_eft_shared/shells/heavy_shell_concrete2.ogg", "arc9_eft_shared/shells/heavy_shell_concrete3.ogg",
}

ARC9EFT.ADSMachineGun = {
    "arc9_eft_shared/ads/aim_on_machinegun_01.ogg", 
    "arc9_eft_shared/ads/aim_on_machinegun_02.ogg", 
    "arc9_eft_shared/ads/aim_on_machinegun_03.ogg", 
    "arc9_eft_shared/ads/aim_on_machinegun_04.ogg", 
    "arc9_eft_shared/ads/aim_on_machinegun_05.ogg", 
    "arc9_eft_shared/ads/aim_on_machinegun_06.ogg", 
    "arc9_eft_shared/ads/aim_on_machinegun_07.ogg", 
    "arc9_eft_shared/ads/aim_on_machinegun_08.ogg", 
    "arc9_eft_shared/ads/aim_on_machinegun_09.ogg", 
    "arc9_eft_shared/ads/aim_on_machinegun_10.ogg", 
    "arc9_eft_shared/ads/aim_on_machinegun_11.ogg", 
    "arc9_eft_shared/ads/aim_on_machinegun_12.ogg", 
}

ARC9EFT.ADSPistol = {
    "arc9_eft_shared/ads/aim_on_pistol_01.ogg", 
    "arc9_eft_shared/ads/aim_on_pistol_02.ogg", 
    "arc9_eft_shared/ads/aim_on_pistol_03.ogg", 
    "arc9_eft_shared/ads/aim_on_pistol_04.ogg", 
    "arc9_eft_shared/ads/aim_on_pistol_05.ogg", 
    "arc9_eft_shared/ads/aim_on_pistol_06.ogg", 
    -- "arc9_eft_shared/ads/aim_on_pistol_07.ogg", 
    "arc9_eft_shared/ads/aim_on_pistol_08.ogg", 
}

ARC9EFT.ADSRifle = {
    "arc9_eft_shared/ads/aim_on_riffle_04.ogg", 
    "arc9_eft_shared/ads/aim_on_riffle_03.ogg", 
    "arc9_eft_shared/ads/aim_on_riffle_05.ogg", 
    "arc9_eft_shared/ads/aim_on_riffle_06.ogg", 
    "arc9_eft_shared/ads/aim_on_riffle_08.ogg", 
    "arc9_eft_shared/ads/aim_on_riffle_11.ogg", 
    "arc9_eft_shared/ads/aim_on_riffle_12.ogg", 
    "arc9_eft_shared/ads/aim_on_riffle_14.ogg", 
    "arc9_eft_shared/ads/aim_on_riffle_15.ogg", 
    "arc9_eft_shared/ads/aim_on_riffle_16.ogg", 
    "arc9_eft_shared/ads/aim_on_riffle_17.ogg", 
    "arc9_eft_shared/ads/aim_on_riffle_18.ogg",
}

ARC9EFT.ADSRifleOut = {
    "arc9_eft_shared/ads/aim_on_riffle_02.ogg", 
    "arc9_eft_shared/ads/aim_on_riffle_03.ogg", 
    "arc9_eft_shared/ads/aim_on_riffle_07.ogg", 
    "arc9_eft_shared/ads/aim_on_riffle_09.ogg", 
    "arc9_eft_shared/ads/aim_on_riffle_12.ogg", 
    "arc9_eft_shared/ads/aim_on_riffle_16.ogg", 

    "arc9_eft_shared/ads/aim_on_riffle_15.ogg", 
    "arc9_eft_shared/ads/aim_on_riffle_17.ogg", 
    "arc9_eft_shared/ads/aim_on_riffle_18.ogg", 
}

ARC9EFT.ADSSMG = {
    "arc9_eft_shared/ads/aim_on_smg_01.ogg", 
    "arc9_eft_shared/ads/aim_on_smg_02.ogg", 
    "arc9_eft_shared/ads/aim_on_smg_03.ogg", 
    "arc9_eft_shared/ads/aim_on_smg_04.ogg", 
    "arc9_eft_shared/ads/aim_on_smg_05.ogg", 
    "arc9_eft_shared/ads/aim_on_smg_06.ogg", 
    "arc9_eft_shared/ads/aim_on_smg_07.ogg", 
    "arc9_eft_shared/ads/aim_on_smg_08.ogg", 
    "arc9_eft_shared/ads/aim_on_smg_09.ogg", 
    "arc9_eft_shared/ads/aim_on_smg_10.ogg",
    "arc9_eft_shared/ads/aim_on_smg_11.ogg",
}

if SERVER then
    util.AddNetworkString("arc9eftjam")
    util.AddNetworkString("arc9eftmissingparts")
    util.AddNetworkString("arc9eftmagcheck")
    util.AddNetworkString("arc9eftquestionnotif")
    util.AddNetworkString("arc9eftbadtripwire")
else
    matproxy.Add({
        name = "ARC9_EFT_FAKEAMMO",
        init = function(self, mat, values)
            self.Frame = values.resultvar
            self.Minusframe = values.minusframe
        end,

        bind = function(self, mat, ent)
            mat:SetFloat(self.Frame, 30 - self.Minusframe)
            
            if IsValid(ent) and IsValid(ent.weapon) then ent = ent.weapon end

            if IsValid(ent) and IsValid(ent:GetOwner()) and IsValid(ent:GetOwner():GetActiveWeapon()) and ent:GetClass() != "arc9_droppedmag" then
                local weapon = ent:GetOwner():GetActiveWeapon()
                if weapon and weapon.ARC9 then
                    mat:SetFloat(self.Frame, math.Clamp(30-weapon:GetLoadedRounds()+1, 0,  30 - self.Minusframe))
                end
            end
        end
    })

    -- if !ARC9.ScreenScale then ARC9.ScreenScale = function(size) return size * (ScrW() / 640) * GetConVar("arc9_hud_scale"):GetFloat() end end
    local function ss(size) return size * (ScrW() / 640) * GetConVar("arc9_hud_scale"):GetFloat() end

    local minnextjam = 0
    local jammedstarted = false
    local jammed1 = false
    local jammed2 = false
    local jammed3 = false
	
    local glowmat = Material("vgui/arc9_eft_shared/glow_particle.png", "mips smooth")

    local glowmat_r = Material("vgui/arc9_eft_shared/malfunction_glow_red_additive.png", "mips smooth")
    glowmat_r:SetInt("$flags", bit.bor(glowmat_r:GetInt("$flags"), 128)) -- additive
    local glowmat_y = Material("vgui/arc9_eft_shared/malfunction_glow_yellow_additive.png", "mips smooth")
    glowmat_y:SetInt("$flags", bit.bor(glowmat_y:GetInt("$flags"), 128)) -- additive
    local glowmat_g = Material("vgui/arc9_eft_shared/malfunction_glow_green_additive.png", "mips smooth")
    glowmat_g:SetInt("$flags", bit.bor(glowmat_g:GetInt("$flags"), 128)) -- additive

    local jammat = Material("vgui/arc9_eft_shared/notification_icon_alert_red.png", "mips smooth")
    local magcheckmat = Material("vgui/arc9_eft_shared/icon_info_magsize.png", "")
    local malftable = {
        [0] = "eft_hud_misfire",
        [1] = "eft_hud_eject",
        [2] = "eft_hud_feed",
        [3] = "eft_hud_bolt",
        [4] = "eft_hud_bolt",
        [5] = "eft_hud_bolt",
    }

    local function aproxammo(checktype, mag, max)
        if checktype then
            if mag == max then return ARC9:GetPhrase("eft_hud_full")
            elseif mag == 0 then return ARC9:GetPhrase("eft_hud_empty")
            else return mag end
        else
            if mag >= max*0.9 then return ARC9:GetPhrase("eft_hud_full")
            elseif mag >= max*0.8 then return ARC9:GetPhrase("eft_hud_nearlyfull")
            elseif mag >= max*0.4 then return ARC9:GetPhrase("eft_hud_aboutfull")
            elseif mag >= max*0.3 then return ARC9:GetPhrase("eft_hud_lessthanhlaf")
            elseif mag >= max*0.01 then return ARC9:GetPhrase("eft_hud_almostempty")
            else return ARC9:GetPhrase("eft_hud_empty") end
        end
    end

    local function glowww(mat)
        local sw, sh = ScrW(), ScrH()
        surface.SetDrawColor(255, 255, 255, CurTime()%0.18 > 0.09 and 128 or 0) -- blinking effect
        surface.SetMaterial(mat)
        surface.DrawTexturedRect(sw - sh/2.5, sh - sh/2.5, sh/2.5, sh/2.5)
    end

    hook.Add("HUDPaintBackground", "arc9eftjamglow", function()
        if jammedstarted then
            local ply = LocalPlayer()
            if IsValid(ply) then
                local wep = ply:GetActiveWeapon()
                if jammedstarted == wep and IsValid(wep) and wep.ARC9 then
                    if !wep:GetJammed() then
                        jammed3 = true
                        jammedstarted = false 
                        timer.Simple(0.3, function() jammed3 = false end)
                    end
                end
            end
        end

        if jammed1 then glowww(glowmat_r) end
        if jammed2 then glowww(glowmat_y) end
        if jammed3 then glowww(glowmat_g) end
    end)

    surface.CreateFont("eftnotiffont", { font = "Bender", size = ss(6), weight = 550, blursize = ss(0.3), antialias = true, extended = true })
    surface.CreateFont("eftammocount", { font = "Bender", size = ss(12), weight = 550, blursize = ss(0.3), antialias = true, extended = true })
    surface.CreateFont("eftammotype", { font = "Bender", size = ss(7), weight = 550, blursize = ss(0.3), antialias = true, extended = true })

    local function makeeftnotif(text, icon)
        local notif = vgui.Create("DPanel", GetHUDPanel())
        notif:SetPos(ScrW() - ss(166.5), ScrH())
        notif:SetSize(ss(166.5), ss(9))
        notif:SetAlpha(0)
        
        notif:MoveTo(ScrW() - ss(166.5), ScrH() - ss(10), 0.25, 0, 1, nil) -- in
        notif:AlphaTo(255, 0.3, 0, nil) -- in

        notif:AlphaTo(0, 0.2, 2.5, nil) -- out
        notif:MoveTo(ScrW() - ss(166.5), ScrH(), 0.25, 2.5, 1, function() notif:Remove() end) -- out

        notif:MoveToBack()
        surface.PlaySound("arc9_eft_shared/notification_exp.ogg")

        notif.Paint = function(self2, w, h) 
            surface.SetDrawColor(0, 0, 0, 250)
            surface.DrawRect(0, 0, w, h)
            surface.SetDrawColor(255, 255, 255, 255)
            surface.SetMaterial(icon)
            surface.DrawTexturedRect(ss(2), 0, h, h)
            surface.SetFont("eftnotiffont")
            surface.SetTextPos(ss(13), ss(1.4))
            surface.SetTextColor(255, 255, 255, 255)
            surface.DrawText(text)
        end
    end    
    
    local function makeeftmagcheck(text, ammotype)
        ammotype = ammotype or "???"
        surface.SetFont("eftammocount")
        local tw = surface.GetTextSize(text) + ss(10)
        surface.SetFont("eftammotype")
        local tw2 = surface.GetTextSize(ammotype) + ss(10)

        local notif = vgui.Create("DPanel", GetHUDPanel())
        notif:SetPos(ScrW() - ss(19+5) - math.max(tw, tw2), ScrH() - ss(38))
        notif:SetSize(math.max(tw, tw2), ss(13+13))
        notif:SetAlpha(0)
        
        notif:AlphaTo(255, 0.3, 0.1, nil) -- in

        notif:AlphaTo(0, 0.2, 3, nil) -- out

        notif:MoveToBack()

        notif.Paint = function(self2, w, h) 
            surface.SetDrawColor(0, 0, 0, 128)
            surface.DrawRect(w-tw, 0, tw, h * 0.5)
            
            surface.SetFont("eftammocount")
            surface.SetTextPos(w - tw + ss(5), ss(0.5))
            surface.SetTextColor(255, 255, 255, 255)
            surface.DrawText(text)

            surface.SetDrawColor(255, 255, 255, 255)
            surface.SetMaterial(magcheckmat)
            surface.DrawTexturedRect(w - tw2, ss(16.67), ss(6), ss(6))

            surface.SetFont("eftammotype")
            surface.SetTextPos(w - tw2 + ss(7.5), ss(16))
            surface.SetTextColor(214, 214, 214)
            surface.DrawText(ammotype)
        end
    end
    
    local numpanel

    timer.Simple(3, function() 
        numpanel = vgui.Create("DPanel", GetHUDPanel())
        numpanel:SetPos(ScrW(), ScrH())
        numpanel:SetSize(0, 0)
    end)

    function ARC9EFTdrawnumber(num)
        num = tostring(num)
        surface.SetFont("eftammocount")
        local tw = surface.GetTextSize(num) + ss(10)

        numpanel:SetPos(ScrW() - ss(30) - tw, ScrH() - ss(40))
        numpanel:SetSize(tw, ss(28))
        
        numpanel:AlphaTo(255, 0.3, 0, nil) -- in
        timer.Create("arc9eftnumpanel", 3, 1, function() numpanel:AlphaTo(0, 0.2, 0, nil) end) -- out
        
        numpanel:MoveToBack()

        numpanel.Paint = function(self2, w, h) 
            surface.SetDrawColor(0, 0, 0, 128)
            surface.DrawRect(w-tw, 0, tw, h * 0.5)
            
            surface.SetFont("eftammocount")
            surface.SetTextPos(w - tw + ss(5), ss(0.5))
            surface.SetTextColor(255, 255, 255, 255)
            surface.DrawText(num)
        end
    end

    net.Receive("arc9eftjam", function(len)
        local jid = net.ReadUInt(3)
        if CurTime() < minnextjam then return end
        if !GetConVar("arc9_eft_jam_hud"):GetBool() then return end
        minnextjam = CurTime() + 0.5
        jammed1 = true
        jammedstarted = IsValid(LocalPlayer()) and LocalPlayer():GetActiveWeapon()
        surface.PlaySound("arc9_eft_shared/battle_malfunction_examined.ogg")


        timer.Simple(0.75, function() jammed1 = false end)

        timer.Simple(1.0, function() 
            jammed2 = true 
            makeeftnotif(string.format(ARC9:GetPhrase("eft_hud_malf"), (ARC9:GetPhrase(malftable[jid]) or "???")), jammat) 
        end)

        timer.Simple(1.3, function() jammed2 = false end)

        -- timer.Simple(3, function() jammed3 = true end)
        -- timer.Simple(3.3, function() jammed3 = false end)
    end)    
    
    net.Receive("arc9eftmissingparts", function(len)
        -- surface.PlaySound("arc9_eft_shared/battle_malfunction_examined.ogg")
        jammed1 = true
        makeeftnotif(ARC9:GetPhrase("eft_hud_missing"), jammat)
        timer.Simple(1.2, function() jammed1 = false end)
    end)

    net.Receive("arc9eftquestionnotif", function(len)
        surface.PlaySound("arc9_eft_shared/battle_malfunction_examined.ogg")
        makeeftnotif("???", magcheckmat)
        timer.Simple(1.2, function() jammed1 = false end)
    end)

    net.Receive("arc9eftbadtripwire", function(len)
        surface.PlaySound("arc9_eft_shared/notification_exp.ogg")
        makeeftnotif(ARC9:GetPhrase("eft_hud_badtrip"), jammat)
        timer.Simple(1.2, function() jammed1 = false end)
    end)
    
    net.Receive("arc9eftmagcheck", function(len)
        local checktype = net.ReadBool()
        local rnds = net.ReadUInt(9)
        local maxrnds = net.ReadUInt(9)
        
        rnds = aproxammo(checktype, math.Clamp(rnds-1, 0, maxrnds), maxrnds)

        local ply = LocalPlayer()
        if !IsValid(ply) then return end
        local wep = ply:GetActiveWeapon()
        if !IsValid(ply:GetActiveWeapon()) and wep.Trivia then return end

        local rndtype = ARC9:GetPhrase(wep:GetValue("EFTRoundName")) or ARC9:GetPhrase(wep:GetValue("EFTRoundName2")) or wep:GetValue("EFTRoundName") or wep:GetValue("EFTRoundName2") or "????"
        
        if rnds == ARC9:GetPhrase("eft_hud_empty") then rndtype = ARC9:GetPhrase("eft_hud_none") end

        makeeftmagcheck(rnds .. "", rndtype)
    end)
end

local ergoadsmult = 0.65 -- default eft lvl1 character will be 1 here, but we are going to pretend we have high skill 

ARC9EFT.ErgoHook = function(self, orig)
    return ((100 - math.Clamp((self:GetValue("EFTErgo") or 0), 0, 100)) * 0.01 + 0.35) * ergoadsmult -- so real
end

ARC9EFT.ErgoBreathHook = function(self, orig)
    if self:GetBipod() then return orig * 10 end
    return orig - (100 - math.Clamp((self:GetValue("EFTErgo") or 0), 0, 100)) / 3
end

ARC9EFT.ErgoAdsVolume = function(self, data)
    if data.name == "exitsights" or data.name == "entersights" then
        data.volume = 0.75 * (100 - math.Clamp((self:GetValue("EFTErgo") or 0), 0, 100)) / 100 -- real tarball
    end
    return data
end

ARC9EFT.SpreadBonus = function(wep, spread) 
    if !wep:GetInSights() and !wep:GetCustomize() and wep:GetValue("EFTHipFireSpreadBonus") then 
        return spread - (wep.SpreadAddHipFire or 0) * 0.5 
    end
end

local conVars = {
    {name = "eft_mult_pistol", default = "0.5", replicated = true },
    {name = "eft_mult_shotgun", default = "0.5", replicated = true },
    {name = "eft_mult_carabine", default = "0.5", replicated = true },
    {name = "eft_mult_rifle", default = "0.5", replicated = true },
    {name = "eft_mult_bigrifle", default = "0.75", replicated = true },
    {name = "eft_mult_338", default = "0.75", replicated = true },
    {name = "eft_mult_massive", default = "0.5", replicated = true },
    {name = "eft_mindmgrange", default = "1000", replicated = true },
    {name = "eft_mindmgrange_sg", default = "100", replicated = true },

    {name = "eft_mult_melee", default = "1", replicated = true },
    {name = "eft_enable_concussion", default = "1", replicated = true },
    {name = "eft_mult_flashbang", default = "1", replicated = true },
    {name = "eft_jam_hud", default = "1", replicated = true },
    {name = "eft_taran_jam", default = "1", replicated = true },
    {name = "eft_flashbang_ahmad", default = "0" },
    {name = "eft_nontpik_mode", default = "0", replicated = true },
    {name = "eft_singleuse_behaviour", default = "0", replicated = true },
    {name = "eft_mult_explosive", default = "1", replicated = true },
    -- {name = "eft_mult_ergo", default = "0.65", replicated = true },
}

for _, var in ipairs(conVars) do
    local convar_name = "arc9_" .. var.name

    if var.client and CLIENT then
        CreateClientConVar(convar_name, var.default, true, var.userinfo)
    else
        local flags = FCVAR_ARCHIVE
        if var.replicated then
            flags = flags + FCVAR_REPLICATED
        end
        if var.userinfo then
            flags = flags + FCVAR_USERINFO
        end
        CreateConVar(convar_name, var.default, flags, var.helptext, var.min, var.max)
    end
end


if CLIENT then
    timer.Simple(1, function()
    
        local eftsettings = {
            TabName = "setting.eft",
            sv = true,
            { type = "label", text = "setting.eft.label" },
 
            { sv = true, type = "slider", text = "setting.eft.mindmg.title", convar = "eft_mindmgrange", min = 50, max = 1000, desc = "setting.eft.mindmg.desc" },
            { sv = true, type = "slider", text = "setting.eft.mindmg.sg.title", convar = "eft_mindmgrange_sg", min = 5, max = 200, desc = "setting.eft.mindmg.sg.desc" },

            { type = "label", text = "setting.eft.dmgmult.title", desc = "setting.eft.dmgmult.desc" },

            { sv = true, type = "slider", text = "setting.eft.dmgmult.pistol.title", convar = "eft_mult_pistol", min = 0.1, max = 1.5, decimals = 2, desc = "setting.eft.dmgmult.pistol.desc" },
            { sv = true, type = "slider", text = "setting.eft.dmgmult.shotgun.title", convar = "eft_mult_shotgun", min = 0.1, max = 1.5, decimals = 2, desc = "setting.eft.dmgmult.shotgun.desc" },
            { sv = true, type = "slider", text = "setting.eft.dmgmult.carbine.title", convar = "eft_mult_carabine", min = 0.1, max = 1.5, decimals = 2, desc = "setting.eft.dmgmult.carbine.desc" },
            { sv = true, type = "slider", text = "setting.eft.dmgmult.rifle.title", convar = "eft_mult_rifle", min = 0.1, max = 1.5, decimals = 2, desc = "setting.eft.dmgmult.rifle.desc" },
            { sv = true, type = "slider", text = "setting.eft.dmgmult.bigrifle.title", convar = "eft_mult_bigrifle", min = 0.1, max = 1.5, decimals = 2, desc = "setting.eft.dmgmult.bigrifle.desc" },
            { sv = true, type = "slider", text = "setting.eft.dmgmult.338.title", convar = "eft_mult_338", min = 0.1, max = 1.5, decimals = 2, desc = "setting.eft.dmgmult.338.desc" },
            { sv = true, type = "slider", text = "setting.eft.dmgmult.massive.title", convar = "eft_mult_massive", min = 0.1, max = 1.5, decimals = 2, desc = "setting.eft.dmgmult.massive.desc" },
            { sv = true, type = "slider", text = "setting.eft.dmgmult.melee.title", convar = "eft_mult_melee", min = 0.1, max = 3, decimals = 2, desc = "setting.eft.dmgmult.melee.desc" },
            { sv = true, type = "slider", text = "setting.eft.dmgmult.explosive.title", convar = "eft_mult_explosive", min = 0.1, max = 3, decimals = 2, desc = "setting.eft.dmgmult.explosive.desc" },

            { sv = true, type = "button", text = "settings.server.developer.reloadatts.title", desc = "setting.eft.reloadatts.desc", content = "settings.server.developer.reload", func = function(self2)
                RunConsoleCommand("arc9_reloadatts")
            end},

            { type = "label", text = "setting.eft.miscfeatures.title", desc = "setting.eft.miscfeatures.desc" },
            { sv = true, type = "bool", text = "setting.eft.concussion.title", convar = "eft_enable_concussion", desc = "setting.eft.concussion.desc" },
            { sv = true, type = "slider", text = "setting.eft.flashduration.title", convar = "eft_mult_flashbang", min = 0.01, max = 2, decimals = 2, desc = "setting.eft.flashduration.desc" },
            { type = "bool", text = "setting.eft.ahmad.title", convar = "eft_flashbang_ahmad", desc = "setting.eft.ahmad.desc" },
            { type = "bool", text = "setting.eft.jamhud.title", convar = "eft_jam_hud", desc = "setting.eft.jamhud.desc" },
            { sv = true, type = "bool", text = "setting.eft.prtaran.title", convar = "eft_taran_jam", desc = "setting.eft.prtaran.desc" },
            { sv = true, type = "bool", text = "setting.eft.holdtypes.title", convar = "eft_nontpik_mode", desc = "setting.eft.holdtypes.desc" },
            { sv = true, type = "bool", text = "setting.eft.rshg2.title", convar = "eft_singleuse_behaviour", desc = "setting.eft.rshg2.desc" },

        }
        
        table.insert(ARC9.SettingsTable, 333, eftsettings)
    
    end)
end


list.Set("ContentCategoryIcons", "ARC9 - Escape From Tarkov", "eft_16.png")